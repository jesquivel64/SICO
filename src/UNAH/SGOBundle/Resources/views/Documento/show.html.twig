{% extends "UNAHSGOBundle::layout.html.twig" %}

{% block content %}
<div class="row-fluid">
  <hgroup class="span12 page-header">
    <h1>{{ entity.numero }} <small>{{ entity.tipo }} {% if not entity.recibido %}Enviado{% endif %}</small></h1>
  </hgroup>
</div>
<div class="row-fluid">
  <section class="span4">
    <table class="table table-striped table-bordered">
      <caption>Datos del {{ entity.tipo }}</caption>
      <tbody>
        <tr>
          <th>Id</th>
          <td>{{ entity.id }}</td>
        </tr>
        <tr>
          <th>Numero</th>
          <td>{{ entity.numero }}</td>
        </tr>
        <tr>
          <th>Descripci&oacute;n</th>
          <td>{{ entity.descripcion }}</td>
        </tr>
        <tr>
          <th>Autor</th>
          <td>{{ entity.autor }}</td>
        </tr>
        <tr>
          <th>Entregado</th>
          <td>{{ entity.entregado }}</td>
        </tr>
        <tr>
          <th>Destinatario</th>
          <td>{{ entity.destinatario }}</td>
        </tr>
        <tr>
          <th>Recibio</th>
          <td>{{ entity.recibio }}</td>
        </tr>
        <tr>
          <th>Fecha de Emisi&oacute;n</th>
          <td>{{ entity.fechaDeEmision|date('Y-m-d H:i:s') }}</td>
        </tr>
        <tr>
          <th>Fecha de Envio</th>
          <td>{{ entity.fechaDeEnvio|date('Y-m-d H:i:s') }}</td>
        </tr>
        <tr>
          <th>Fecha de Recibido</th>
          <td>{{ entity.fechaDeRecibido|date('Y-m-d H:i:s') }}</td>
        </tr>
        <tr>
          <th>Estado</th>
          <td>{{ entity.estado }}</td>
        </tr>
        {% if entity.recibido %}
        <tr>
          <th>Emisor</th>
          <td>{{ entity.emisor }}</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </section>
  <section class="span4">
    <table class="table table-striped table-bordered">
      <caption>
        Adjuntos
      </caption>
      <thead>
        <tr>
          <th>Comentario</th>
          <th>Archivo</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for adjunto in entity.adjuntos %}
        <tr>
          <td>{{ adjunto.nombre }}</td>
          <td><a href="../../../{{ adjunto.getWebPath() }}">{{ adjunto.path }}</a></td>
          <td><a class="btn btn-success" href="{{ path('adjunto_edit', { 'id': adjunto.id }) }}">editar</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
  <section class="span4">
    <table class="table table-striped table-bordered">
      <caption>
        Seguimiento
      </caption>
      <thead>
        <tr>
          <th>Comentario</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for seguimiento in entity.comentarios %}
        <tr>
          <td>{{ seguimiento.comentario }}</td>
          <td>{{ seguimiento.fecha|date("d/m/Y") }}</td>
          <td><a class="btn btn-success" href="{{ path('comentario_edit', { 'id': seguimiento.id }) }}">editar</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</div>
<section class="row-fluid">
  <section class="span12">
    <table class="table table-striped table-bordered">
      <caption>
        Documentos Relacionados
      </caption>
      <thead>
        <tr>
          <th class="no-print">Id</th>
          <th>Numero</th>
          <th>Tipo</th>
          <th>Descripcion</th>
          <th>Recibio</th>
          <th>Enviado</th>
          <th>Recepci&oacute;n</th>
          <th>Emisi&oacute;n</th>
          <th class="no-print">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for documento in entity.respuestas %}
        <tr>
          <td class="no-print"><a href="{{ path('documento_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
          <td>{{ documento.numero }}</td>
          <td>{{ documento.tipo }}</td>
          <td>{{ documento.descripcion }}</td>
          <td>{{ documento.recibio }}</td>
          <td>{{ documento.getFechaDeEnvio|date("d/m/Y") }}</td>
          <td>{{ documento.getFechaDeRecibido|date("d/m/Y") }}</td>
          <td>{{ documento.getFechaDeEmision|date("d/m/Y") }}</td>
          <td class="no-print"><a class="btn btn-primary" href="{{ path('documento_show', { 'id': documento.id }) }}">Mostrar</a><a class="btn btn-success" href="{{ path('documento_edit', { 'id': documento.id }) }}">Editar</a> </ul> </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</section>
<div class="row-fluid">
  <ul class="record_actions">
    <li>
      <a href="{{ path('documento') }}"> Back to the list </a>
    </li>
    <li>
      <a href="{{ path('documento_edit', { 'id': entity.id }) }}"> Edit </a>
    </li>
    <li>
      <a href="{{ path('adjunto_new', { 'documento': entity.id }) }}"> Agregar Adjunto </a>
    </li>
    <li>
      <a href="{{ path('comentario_new', { 'documento': entity.id }) }}">Registrar Seguimiento</a>
    </li>
    <li><a href="{{ path('documento_responder', { 'documento': entity.id }) }}">Responder</a></li>
    <li>
      <form action="{{ path('documento_delete', { 'id': entity.id }) }}" method="post">
        <input type="hidden" name="_method" value="DELETE" />
        {{ form_widget(delete_form) }}
        <button type="submit">
          Delete
        </button>
      </form>
    </li>
  </ul>
</div>
{% endblock %}
