{% extends "UNAHSGOBundle::layout.html.twig" %}

{% block content %}
<div class="row-fluid">
  <section class="span3 no-print">
    <br />
    <nav class="sidebar-nav no-print">
      <ul class="nav nav-tabs nav-stacked no-print">
        <li>
          <a href="{{ path('documento_documento', { 'tipo': entity.tipo.id }) }}">Regresar a  {{ entity.tipo.nombre }}s</a>
        </li>
        <li>
          <a href="{{ path('documento_search') }}">Buscar Documentos</a>
        </li>
      </ul>
    </nav>
    <nav class="sidebar-nav no-print">
      <ul class="nav nav-tabs nav-stacked no-print">
        <li>
          <a href="{{ path('documento_edit', { 'id': entity.id }) }}"> Editar este {{ entity.tipo.nombre }}</a>
        </li>
        <li>
          <a href="{{ path('adjunto_new', { 'documento': entity.id }) }}"> Agregar Adjunto </a>
        </li>
        <li>
          <a href="{{ path('comentario_new', { 'documento': entity.id }) }}">Registrar Seguimiento</a>
        </li>
        <li>
          <a href="{{ path('documento_responder', { 'documento': entity.id }) }}">Responder</a>
        </li>
      </ul>
    </nav>
  </section>
  <section class="span9 ">
    <hgroup class="page-header hero-unit">
      <h1>{{ entity.numero }} <small>{{ entity.tipo }} {% if not entity.recibido %}Enviado{% endif %}</small></h1>
    </hgroup>
  </section>
</div>
<div class="row-fluid">
  <section class="span9 offset3">
    <ul>
      <li>
        N&uacute;mero: {{ entity.numero }}
      </li>
      <li>
        Descripci&oacute;n: {{ entity.descripcion }}
      </li>
      <li>
        Autor: {{ entity.autor }}
      </li>
      <li>
        Entregado: {{ entity.entregado }}
      </li>
      <li>
        Destinatario: {{ entity.destinatario }}
      </li>
      <li>
        Recibio: {{ entity.recibio }}
      </li>
      <li>
        Fecha de Emisi&oacute;n: {{ entity.fechaDeEmision|date('d/m/Y H:i:s') }}
      </li>
      <li>
        Fecha de Envio: {{ entity.fechaDeEnvio|date('d/m/Y H:i:s') }}
      </li>
      <li>
        Fecha de Recibido: {{ entity.fechaDeRecibido|date('d/m/Y H:i:s') }}
      </li>
      <li>
        Estado: {{ entity.estado }}
      </li>
      {% if entity.recibido %}
      <li>
        Emisor: {{ entity.emisor }}
      </li>
      {% endif %}
    </ul>
  </section>
</div>
<section class="row-fluid">
  <section class="span9 offset3">
    <table class="table table-striped table-bordered">
      <caption>
        Adjuntos
      </caption>
      <thead>
        <tr>
          <th>Comentario</th>
          <th>Archivo</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for adjunto in entity.adjuntos %}
        <tr>
          <td>{{ adjunto.nombre }}</td>
          <td><a href="../../../{{ adjunto.getWebPath() }}">{{ adjunto.path }}</a></td>
          <td><a class="btn btn-success" href="{{ path('adjunto_edit', { 'id': adjunto.id }) }}">editar</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</section>
<section class="row-fluid">
  <section class="span9 offset3">
    <table class="table table-striped table-bordered">
      <caption>
        Seguimiento
      </caption>
      <thead>
        <tr>
          <th>Comentario</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for seguimiento in entity.comentarios %}
        <tr>
          <td>{{ seguimiento.comentario }}</td>
          <td>{{ seguimiento.fecha|date("d/m/Y") }}</td>
          <td><a class="btn btn-success" href="{{ path('comentario_edit', { 'id': seguimiento.id }) }}">editar</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</section>
<section class="row-fluid">
  <section class="span9 offset3">
    <table class="table table-striped table-bordered">
      <caption>
        Documentos Relacionados
      </caption>
      <thead>
        <tr>
          <th class="no-print">Id</th>
          <th>Numero</th>
          <th>Tipo</th>
          <th>Descripcion</th>
          <th>Recibio</th>
          <th>Enviado</th>
          <th>Recepci&oacute;n</th>
          <th>Emisi&oacute;n</th>
          <th class="no-print">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for documento in entity.respuestas %}
        <tr>
          <td class="no-print"><a href="{{ path('documento_show', { 'id': documento.id }) }}">{{ documento.id }}</a></td>
          <td>{{ documento.numero }}</td>
          <td>{{ documento.tipo }}</td>
          <td>{{ documento.descripcion }}</td>
          <td>{{ documento.recibio }}</td>
          <td>{{ documento.getFechaDeEnvio|date("d/m/Y") }}</td>
          <td>{{ documento.getFechaDeRecibido|date("d/m/Y") }}</td>
          <td>{{ documento.getFechaDeEmision|date("d/m/Y") }}</td>
          <td class="no-print"><a class="btn btn-primary" href="{{ path('documento_show', { 'id': documento.id }) }}">Mostrar</a><a class="btn btn-success" href="{{ path('documento_edit', { 'id': documento.id }) }}">Editar</a> </ul> </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <form action="{{ path('documento_delete', { 'id': entity.id }) }}" method="post">
      <input type="hidden" name="_method" value="DELETE" />
      {{ form_widget(delete_form) }}
      <button class="btn btn-danger" type="submit">
        Eliminar {{ entity.tipo.nombre }}
      </button>
    </form>
  </section>
</section>
{% endblock %}
